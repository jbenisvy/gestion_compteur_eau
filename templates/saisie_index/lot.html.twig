{% extends 'base.html.twig' %}
{% block title %}Saisie des index ‚Äî Lot {{ lot.numeroLot }} ({{ annee }}){% endblock %}

{% block body %}
<h1>üìù Saisie des index ‚Äî Lot {{ lot.numeroLot }} ‚Äî {{ annee }}</h1>
<p><em>{{ lot.emplacement ?? '' }} ‚Ä¢ {{ lot.typeAppartement ?? '' }} ‚Ä¢ Tanti√®mes : {{ lot.tantieme ?? '?' }}</em></p>

{{ form_start(form) }}

<div class="grid">
  {# On affiche le formulaire tel qu‚Äôil a √©t√© construit : 4 compteurs #}
  {% for child in form %}
    {% if '-numero' in child.vars.name %}
      <div class="bloc">
        <h3>{{ attribute(form, child.vars.name).vars.label }}</h3>
        {{ form_row(attribute(form, child.vars.name)) }}
        {# index N-1 #}
        {% set name_n1 = child.vars.name|replace({'_numero':'_index_n1'}) %}
        {{ form_row(attribute(form, name_n1)) }}
        {# index N #}
        {% set name_n  = child.vars.name|replace({'_numero':'_index'}) %}
        {{ form_row(attribute(form, name_n)) }}
        {# √©tat #}
        {% set name_etat = child.vars.name|replace({'_numero':'_etat'}) %}
        {{ form_row(attribute(form, name_etat)) }}
        {# commentaire #}
        {% set name_com = child.vars.name|replace({'_numero':'_commentaire'}) %}
        {{ form_row(attribute(form, name_com)) }}
      </div>
    {% endif %}
  {% endfor %}
</div>

<button type="submit">üíæ Enregistrer les relev√©s {{ annee }}</button>
{{ form_end(form) }}

<style>
.grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:16px; }
.bloc { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px 16px; }
</style>
{% endblock %}
